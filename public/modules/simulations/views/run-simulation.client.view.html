<section ng-controller="RunSimulationController" ng-init="findOne()" layout="row" layout-fill>

    <section layout="column" flex>

        <omt-header></omt-header>
        <om-tabbar></om-tabbar>

        <md-content layout="row" flex>
            <md-content class="om-sidebar">
                <section>
                    <md-list>
                        <h3>Run History</h3>
                        <md-item ng-repeat="iter in simulation.log.slice().reverse() track by $index" ng-click="">
                            <!--<a id="{{iter.date}}">-->
                            <md-item-content class="md-2-line" layout="row" layout-align="start center">
                                <div class="md-avatar">{{simulation.log.length - $index}}</div>
                                <div class="md-list-item-text parameter-item" ng-class="{'md-offset': $index != 0 }"
                                     style="padding-left:25px;">
                                    <h4 class="md-subhead" ng-class="{'log-status-run': iter.status=='Running',
									'log-status-success': iter.status=='Success',
									'log-status-err': iter.status=='Error'}"> {{ iter.status }} </h4>

                                    <p class="description"> {{ iter.date | date:'medium' }}</p>
                                </div>
                            </md-item-content>
                            <!--</a>-->
                            <md-divider></md-divider>
                        </md-item>
                    </md-list>
                </section>
            </md-content>
            <md-divider class="md-padding vertical"></md-divider>
            <md-content class="md-padding" data-ng-show="simulation.name" layout="column" flex>
                <section style="width:80%; padding-bottom:20px;">
                    <h3>Console Output</h3>

                    <p class="edit-dsf description">This console displays some statistics about the steady state and the
                        dynamic paths of model variables;
                        this output is generated by <a href="http://www.gnu.org/software/octave/" target="_blank"
                                                       style="color:#000;font-weight:500;">GNU Octave</a>
                        and <a href="http://www.dynare.org/" target="_blank"
                               style="color:#000;font-weight:500;">Dynare</a>. Any simulation errors can be examined
                        here as well.</p>
                </section>
                <section class="console" flex> {{output}}
                    <div id="bottom"></div>
                </section>

                <div style="display:inline-block; padding-top:20px; padding-bottom:20px;">
                    <md-button class="md-primary" ng-click="runSimulation()"> Run Simulation</md-button>
                    <md-button md-no-ink class="md-primary" ng-show="canExport" ng-href="/output/{{simulation._id}}">
                        Export CSV
                    </md-button>
                </div>
            </md-content>
        </md-content>
    </section>
</section>
